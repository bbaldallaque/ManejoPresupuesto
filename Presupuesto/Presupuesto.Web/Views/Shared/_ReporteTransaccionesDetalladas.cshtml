@model ReporteTransaccionesDetalladas

@{
	var resumentMontos = new ResumenMontoViewModel()
			{
				Ingresos = Model.BalanceDepositos,
				Gastos = Model.BalanceRetiros,
				Total = Model.Total
			};
}

<partial name="_NavegarPorMeses" model="@Model.FechaInicio"/>

<partial name="_ResumenMontos" model="@resumentMontos"/>

@if (Model.TransaccionesAgrupadas.Count() == 0)
{
	<h5>No hay Transacciones para mostrar</h5>
}
else
{
	<table class="table">
		<tbody>
			@foreach (var transaccionesAgrupadas in Model.TransaccionesAgrupadas)
			{
				<tr style="background-color: lightblue; font-size: 26px">
					<td colspan="3">
						@transaccionesAgrupadas.FechaTransaccion.Day
						<span class="badge bg-secondary">
							@transaccionesAgrupadas.FechaTransaccion.ToString("ddd")
						</span>
					</td>
					<td class="activo">@transaccionesAgrupadas.BalanceDepositos.ToString("N")</td>
					<td class="pasivo">@transaccionesAgrupadas.BalanceRetiros.ToString("N")</td>
				</tr>
				@foreach (var transacciones in transaccionesAgrupadas.Transacciones)
				{
					<tr style="vertical-align: middle">
						<td>
							<a asp-controller="Transacciones" asp-action="Editar" asp-route-id="@transacciones.Id"
							asp-route-UrlRetorno="@ViewBag.urlRetorno">
								<i class="bi-pencil"></i>
							</a>
						</td>
						<td>@transacciones.Categoria</td>
						<td>@transacciones.Cuenta</td>
						<td class="activo">@(transacciones.TipoOperacionId == TipoOperacion.Ingreso ? transacciones.Monto.ToString("N") : null)</td>
						<td class="pasivo">@(transacciones.TipoOperacionId == TipoOperacion.Gasto ? transacciones.Monto.ToString("N") : null)</td>
					</tr>
				}
			}
		</tbody>
	</table>
}
